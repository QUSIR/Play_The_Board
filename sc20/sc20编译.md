

MSM的make命令全都需要在源码根目录下执行，直接查找整个./build/core/目录会找到很多PHONY目标。

简单介绍一部分如下：

默认的make对象，会编译整个Android系统

	make droid

编译bootloader

	make aboot

相当于把bootloader和kernel都编译出来然后合并成boot.img

	make bootimage

只编译自带的应用

	make apps_only


只编译文档
	make docs

只编译SDK

	make SDK

检查API

	make checkapi

根据API更新current.xml

	make update-api


编译某个由于LOCAL_MODULE标注的库，源代码所在目录中需要有Android.mk

	make [lib-name]
	eg：make libaudio

清除build的输出

	make clean
 
编译Linux kernel，FSL平台是在./kernel/目录下执行，而MSM平台是在根目录下执行。

	make kernel


在./kernel/目录下执行`make mrproper`来清除linux内核的编译。


配置内核选项，FSL平台是在./kernel/目录下执行，而MSM平台是在根目录下执行。

	make kernelconfig


重点分析一下linux kernel层的几个make目标，它们都是在./kernel/AndroidKernel.mk里面定义的。

其中kernelconfig的目标定义为：

 kernelconfig: $(KERNEL_OUT) $(KERNEL_CONFIG)
      env KCONFIG_NOTIMESTAMP=true \
      $(MAKE) -C kernel O=../$(KERNEL_OUT) ARCH=arm CROSS_COMPILE=arm-eabi- menuconfig
      cp $(KERNEL_OUT)/.config kernel/arch/arm/configs/$(KERNEL_DEFCONFIG)

其依赖定义为：

$(KERNEL_OUT):
      mkdir -p $(KERNEL_OUT)

$(KERNEL_CONFIG): $(KERNEL_OUT)
      $(MAKE) -C kernel O=../$(KERNEL_OUT) ARCH=arm CROSS_COMPILE=arm-eabi- $(KERNEL_DEFCONFIG)

因此，如果想在./kernel/目录下运行make menuconfig，根据项目的配置将上述脚本展开为：

mkdir -p ./out/target/product/pid/obj/KERNEL_OBJ

make -C kernel O=../out/target/product/pid/obj/KERNEL_OBJ/ ARCH=arm CROSS_COMPILE=arm-eabi- pid_defconfig

env KCONFIG_NOTIMESTAMP=true

make -C kernel O=../out/target/product/pid/obj/KERNEL_OBJ/ ARCH=arm CROSS_COMPILE=arm-eabi- menuconfig

(其中pid为产品名称)

如果不需要拷贝配置的结果，则最后cp那句。